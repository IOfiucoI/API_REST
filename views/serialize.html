<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Serialize Object </title>
	<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-xBuQ/xzmlsLoJpyjoggmTEz8OWUFM0/RC5BsqQBDX2v5cMvDHcMakNTNrHIW2I5f" crossorigin="anonymous"></script>
	<script src="js/jquery.serializeObject.js"></script>
</head>

<body>

	<div class="container">
		<h1>Serialize Object</h1>

		<form>
			<div class="form-group">
				<label for="nombre_recurso">Nombre recurso</label>
				<input type="text" name="nombre_recurso" placeholder="" class="form-control">
			</div>

			<div class="form-group">
				<label for="ext_recurso">Extensi√≥n recurso</label>
				<input type="text" name="ext_recurso" class="form-control">
			</div>

			<div class="form-group">
				<label for="institucionesid_institucion">ID institucion</label>
				<input type="text" name="institucionesid_institucion" class="form-control">
			</div>

			<div class="form-group">
				<label for="imagen"></label>
				<input type="file" name="imagen" class="form-control">
			</div>

			<div class="form-group">
				<input type="submit" class="btn btn-danger" value="AGREGAR">
			</div>

		</form>


		<script>
			$(function () {
				$('form').on('submit', function (e) {
					e.preventDefault();
					$(this).serializeObject().done(function (o) {
						if (window.console) console.log(o);
						var j = JSON.stringify(o);
						//alert(j);
						//window.open("data:image/png;base64," + o.userfile.data);
						console.log();
						$.ajax({
							url: "../controllers/prueba.php",
							type: "POST",
							contentType: 'application/json',
							data: j,
							success: function (result) {
								$('#response').html("Bien");

							},
							error: function (xhr, resp, text) {
								$('#response').html("Mal.</div>");
							}
						});


					});
				});
			});
		</script>

</body>

</html>